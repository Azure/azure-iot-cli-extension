{"configurations": [{"id": "my_config", "schemaVersion": "2.0", "labels": null, "content": {"deviceContent": {"properties.desired.awesome": 3}}, "targetCondition": "tags.environment='test'", "createdTimeUtc": "2022-06-28T22:56:32.937713Z", "lastUpdatedTimeUtc": "2022-06-28T22:56:32.937713Z", "priority": 10, "systemMetrics": {"results": {"targetedCount": 0, "appliedCount": 0}, "queries": {"targetedCount": "select deviceId from devices where tags.environment='test'", "appliedCount": "select deviceId from devices where configurations.[[my_config]].status = 'Applied'"}}, "metrics": {"results": {}, "queries": {}}, "etag": "MQ=="}, {"id": "my_config2", "schemaVersion": "2.0", "labels": null, "content": {"deviceContent": {"properties.desired.prop2": 5}}, "targetCondition": "*", "createdTimeUtc": "2022-06-28T23:03:31.8831286Z", "lastUpdatedTimeUtc": "2022-06-28T23:03:31.8831286Z", "priority": 7, "systemMetrics": {"results": {"targetedCount": 7, "appliedCount": 7}, "queries": {"targetedCount": "select deviceId from devices", "appliedCount": "select deviceId from devices where configurations.[[my_config2]].status = 'Applied'"}}, "metrics": {"results": {}, "queries": {}}, "etag": "MQ=="}], "edgeDeployments": [{"id": "mydeployment1", "schemaVersion": "2.0", "labels": null, "content": {"modulesContent": {"$edgeAgent": {"properties.desired": {"schemaVersion": "1.1", "runtime": {"type": "docker", "settings": {"minDockerVersion": "v1.25", "loggingOptions": "", "registryCredentials": {"ContosoRegistry": {"username": "myacr", "password": "<password>", "address": "myacr.azurecr.io"}}}}, "systemModules": {"edgeAgent": {"type": "docker", "settings": {"image": "mcr.microsoft.com/azureiotedge-agent:1.0", "createOptions": ""}}, "edgeHub": {"type": "docker", "status": "running", "restartPolicy": "always", "startupOrder": 0, "settings": {"image": "mcr.microsoft.com/azureiotedge-hub:1.0", "createOptions": "{\"HostConfig\":{\"PortBindings\":{\"443/tcp\":[{\"HostPort\":\"443\"}],\"5671/tcp\":[{\"HostPort\":\"5671\"}],\"8883/tcp\":[{\"HostPort\":\"8883\"}]}}}"}}}, "modules": {"SimulatedTemperatureSensor": {"version": "1.0", "type": "docker", "status": "running", "restartPolicy": "always", "startupOrder": 2, "settings": {"image": "mcr.microsoft.com/azureiotedge-simulated-temperature-sensor:1.0", "createOptions": "{}"}}, "filtermodule": {"version": "1.0", "type": "docker", "status": "running", "restartPolicy": "always", "startupOrder": 1, "env": {"tempLimit": {"value": "100"}}, "settings": {"image": "myacr.azurecr.io/filtermodule:latest", "createOptions": "{}"}}}}}, "$edgeHub": {"properties.desired": {"schemaVersion": "1.2", "routes": {"sensorToFilter": {"route": "FROM /messages/modules/SimulatedTemperatureSensor/outputs/temperatureOutput INTO BrokeredEndpoint(\"/modules/filtermodule/inputs/input1\")", "priority": 0, "timeToLiveSecs": 1800}, "filterToIoTHub": {"route": "FROM /messages/modules/filtermodule/outputs/output1 INTO $upstream", "priority": 1, "timeToLiveSecs": 1800}}, "storeAndForwardConfiguration": {"timeToLiveSecs": 100}}}}}, "targetCondition": "", "createdTimeUtc": "2022-07-22T22:13:23.289712Z", "lastUpdatedTimeUtc": "2022-07-22T22:13:23.289712Z", "priority": 1, "systemMetrics": {"results": {"appliedCount": 0, "reportedSuccessfulCount": 0, "reportedFailedCount": 0, "targetedCount": 0}, "queries": {"targetedCount": "", "appliedCount": "select deviceId from devices.modules where moduleId = '$edgeAgent' and configurations.[[mydeployment1]].status = 'Applied'", "reportedSuccessfulCount": "select deviceId from devices.modules where moduleId = '$edgeAgent' and configurations.[[mydeployment1]].status = 'Applied' and properties.desired.$version = properties.reported.lastDesiredVersion and properties.reported.lastDesiredStatus.code = 200", "reportedFailedCount": "select deviceId from devices.modules where moduleId = '$edgeAgent' and configurations.[[mydeployment1]].status = 'Applied' and properties.desired.$version = properties.reported.lastDesiredVersion and properties.reported.lastDesiredStatus.code != 200"}}, "metrics": {"results": {}, "queries": {"mymetric": "SELECT deviceId from devices where properties.reported.lastDesiredStatus.code = 200"}}, "etag": "MQ=="}, {"id": "mylayereddeployment1", "schemaVersion": "2.0", "labels": null, "content": {"modulesContent": {"$edgeAgent": {"properties.desired.modules.mymodule0": {"settings": {"image": "myimageuri", "createOptions": "{\"MemorySwap\":0}"}, "type": "docker", "env": {"envvar0": {"value": "envvarval0"}}, "status": "running", "restartPolicy": "always", "version": "1.0"}}, "$edgeHub": {"properties.desired.routes.route0": "from /messages/* INTO $upstream"}, "mymodule0": {"properties.desired.settings": {"prop0": "val0"}}}}, "targetCondition": "", "createdTimeUtc": "2022-07-22T22:16:02.3200653Z", "lastUpdatedTimeUtc": "2022-07-22T22:16:02.3200653Z", "priority": 1, "systemMetrics": {"results": {"appliedCount": 0, "reportedSuccessfulCount": 0, "reportedFailedCount": 0, "targetedCount": 0}, "queries": {"targetedCount": "", "appliedCount": "select deviceId from devices.modules where moduleId = '$edgeAgent' and configurations.[[mylayereddeployment1]].status = 'Applied'", "reportedSuccessfulCount": "select deviceId from devices.modules where moduleId = '$edgeAgent' and configurations.[[mylayereddeployment1]].status = 'Applied' and properties.desired.$version = properties.reported.lastDesiredVersion and properties.reported.lastDesiredStatus.code = 200", "reportedFailedCount": "select deviceId from devices.modules where moduleId = '$edgeAgent' and configurations.[[mylayereddeployment1]].status = 'Applied' and properties.desired.$version = properties.reported.lastDesiredVersion and properties.reported.lastDesiredStatus.code != 200"}}, "metrics": {"results": {}, "queries": {"mymetric": "SELECT deviceId FROM devices WHERE properties.reported.lastDesiredStatus.code = 200"}}, "etag": "MQ=="}], "devices": {"device1-child": {"deviceId": "device1-child", "etag": "AAAAAAAAAAI=", "deviceEtag": "MjIyMjQxNDgw", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "0001-01-01T00:00:00Z", "cloudToDeviceMessageCount": 0, "authenticationType": "sas", "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "modelId": "", "version": 3, "properties": {"desired": {"prop2": 5, "$metadata": {"$lastUpdated": "2022-07-22T22:21:36.3128496Z", "$lastUpdatedVersion": 2, "prop2": {"$lastUpdated": "2022-07-22T22:21:36.3128496Z", "$lastUpdatedVersion": 2, "$lastUpdatedBy": "my_config2", "$lastUpdatedByDigest": "637920542118831286"}}, "$version": 2}, "reported": {"$metadata": {"$lastUpdated": "2022-07-22T22:18:31.5584761Z"}, "$version": 1}}, "configurations": {"my_config2": {"status": "Applied"}}, "capabilities": {"iotEdge": false}, "deviceScope": "ms-azure-iot-edge://edge-parent1-637941250662905791", "parentScopes": ["ms-azure-iot-edge://edge-parent1-637941250662905791"], "symmetricKey": {"primaryKey": "mock_key", "secondaryKey": "mock_key"}}, "edge-parent1": {"deviceId": "edge-parent1", "etag": "AAAAAAAAAAI=", "deviceEtag": "NzgyOTY0MzY=", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "0001-01-01T00:00:00Z", "cloudToDeviceMessageCount": 0, "authenticationType": "sas", "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "modelId": "", "version": 3, "properties": {"desired": {"prop2": 5, "$metadata": {"$lastUpdated": "2022-07-22T22:21:34.7300503Z", "$lastUpdatedVersion": 2, "prop2": {"$lastUpdated": "2022-07-22T22:21:34.7300503Z", "$lastUpdatedVersion": 2, "$lastUpdatedBy": "my_config2", "$lastUpdatedByDigest": "637920542118831286"}}, "$version": 2}, "reported": {"$metadata": {"$lastUpdated": "2022-07-22T22:17:46.2905791Z"}, "$version": 1}}, "configurations": {"my_config2": {"status": "Applied"}}, "capabilities": {"iotEdge": true}, "deviceScope": "ms-azure-iot-edge://edge-parent1-637941250662905791", "parentScopes": ["ms-azure-iot-edge://device2-637909226754880775"], "symmetricKey": {"primaryKey": "mock_key", "secondaryKey": "mock_key"}}, "edge-parent2": {"deviceId": "edge-parent2", "etag": "AAAAAAAAAAI=", "deviceEtag": "MTkxNjA3MjYx", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "0001-01-01T00:00:00Z", "cloudToDeviceMessageCount": 0, "authenticationType": "sas", "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "modelId": "", "version": 3, "properties": {"desired": {"prop2": 5, "$metadata": {"$lastUpdated": "2022-07-22T22:21:35.6819195Z", "$lastUpdatedVersion": 2, "prop2": {"$lastUpdated": "2022-07-22T22:21:35.6819195Z", "$lastUpdatedVersion": 2, "$lastUpdatedBy": "my_config2", "$lastUpdatedByDigest": "637920542118831286"}}, "$version": 2}, "reported": {"$metadata": {"$lastUpdated": "2022-07-22T22:20:07.1656633Z"}, "$version": 1}}, "configurations": {"my_config2": {"status": "Applied"}}, "capabilities": {"iotEdge": true}, "deviceScope": "ms-azure-iot-edge://edge-parent2-637941252071656633", "parentScopes": ["ms-azure-iot-edge://edge-parent1-637941250662905791"], "symmetricKey": {"primaryKey": "mock_key", "secondaryKey": "mock_key"}}, "device2": {"deviceId": "device2", "etag": "AAAAAAAAAAk=", "deviceEtag": "MTI2NjkxNTk2", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "0001-01-01T00:00:00Z", "cloudToDeviceMessageCount": 0, "authenticationType": "selfSigned", "x509Thumbprint": {"primaryThumbprint": "085836B09D1272B03F21FDFA8DC055D658C5AF14", "secondaryThumbprint": null}, "modelId": "", "version": 10, "tags": {"deviceType": "Type1, Type2, Type3", "example": "val"}, "properties": {"desired": {"prop2": 5, "$metadata": {"$lastUpdated": "2022-07-06T22:40:59.3474004Z", "$lastUpdatedVersion": 8, "prop2": {"$lastUpdated": "2022-07-06T22:40:59.3474004Z", "$lastUpdatedVersion": 8, "$lastUpdatedBy": "my_config2", "$lastUpdatedByDigest": "637920542118831286"}}, "$version": 8}, "reported": {"$metadata": {"$lastUpdated": "2022-06-15T20:44:35.4880775Z"}, "$version": 1}}, "configurations": {"my_config2": {"status": "Applied"}}, "capabilities": {"iotEdge": true}, "deviceScope": "ms-azure-iot-edge://device2-637909226754880775"}, "device2-child": {"deviceId": "device2-child", "etag": "AAAAAAAAAAI=", "deviceEtag": "MzQyMDgxOTU2", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "0001-01-01T00:00:00Z", "cloudToDeviceMessageCount": 0, "authenticationType": "sas", "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "modelId": "", "version": 3, "properties": {"desired": {"prop2": 5, "$metadata": {"$lastUpdated": "2022-07-22T22:21:35.7788603Z", "$lastUpdatedVersion": 2, "prop2": {"$lastUpdated": "2022-07-22T22:21:35.7788603Z", "$lastUpdatedVersion": 2, "$lastUpdatedBy": "my_config2", "$lastUpdatedByDigest": "637920542118831286"}}, "$version": 2}, "reported": {"$metadata": {"$lastUpdated": "2022-07-22T22:18:38.1536309Z"}, "$version": 1}}, "configurations": {"my_config2": {"status": "Applied"}}, "capabilities": {"iotEdge": false}, "deviceScope": "ms-azure-iot-edge://edge-parent2-637941252071656633", "parentScopes": ["ms-azure-iot-edge://edge-parent2-637941252071656633"], "symmetricKey": {"primaryKey": "mock_key", "secondaryKey": "mock_key"}}, "simDevice": {"deviceId": "simDevice", "etag": "AAAAAAAAAAQ=", "deviceEtag": "OTk2NjcxNjY1", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "2022-06-08T21:58:20.0868016Z", "cloudToDeviceMessageCount": 0, "authenticationType": "sas", "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "modelId": "", "version": 5, "tags": {"deviceType": "Type1, Type2, Type3"}, "properties": {"desired": {"property1": 24, "prop2": 5, "$metadata": {"$lastUpdated": "2022-06-28T23:03:34.2370119Z", "$lastUpdatedVersion": 3, "property1": {"$lastUpdated": "2022-06-13T19:18:18.5277494Z", "$lastUpdatedVersion": 2}, "prop2": {"$lastUpdated": "2022-06-28T23:03:34.2370119Z", "$lastUpdatedVersion": 3, "$lastUpdatedBy": "my_config2", "$lastUpdatedByDigest": "637920542118831286"}}, "$version": 3}, "reported": {"$metadata": {"$lastUpdated": "2022-06-08T21:39:37.6807769Z"}, "$version": 1}}, "configurations": {"my_config2": {"status": "Applied"}}, "capabilities": {"iotEdge": false}, "deviceScope": "ms-azure-iot-edge://device2-637909226754880775", "parentScopes": ["ms-azure-iot-edge://device2-637909226754880775"], "symmetricKey": {"primaryKey": "mock_key", "secondaryKey": "mock_key"}}, "device3": {"deviceId": "device3", "etag": "AAAAAAAAAAU=", "deviceEtag": "NTI0MTU2MTYx", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "0001-01-01T00:00:00Z", "cloudToDeviceMessageCount": 0, "authenticationType": "certificateAuthority", "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "modelId": "", "version": 6, "tags": {"deviceType": "Type1, Type2, Type3"}, "properties": {"desired": {"prop2": 5, "$metadata": {"$lastUpdated": "2022-07-06T22:42:36.939444Z", "$lastUpdatedVersion": 4, "prop2": {"$lastUpdated": "2022-07-06T22:42:36.939444Z", "$lastUpdatedVersion": 4, "$lastUpdatedBy": "my_config2", "$lastUpdatedByDigest": "637920542118831286"}}, "$version": 4}, "reported": {"$metadata": {"$lastUpdated": "2022-06-15T22:34:50.4953043Z"}, "$version": 1}}, "configurations": {"my_config2": {"status": "Applied"}}, "capabilities": {"iotEdge": false}}}, "modules": {"device1-child": [], "edge-parent1": [], "edge-parent2": [], "device2": [[{"additional_properties": {}, "module_id": "module2", "managed_by": null, "device_id": "device2", "generation_id": "637920587461553088", "etag": "NzI5NDA2MzEx", "connection_state": "Disconnected", "cloud_to_device_message_count": 0, "authentication": {"symmetricKey": {"primaryKey": null, "secondaryKey": null}, "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "type": "certificateAuthority"}}, {"deviceId": "device2", "moduleId": "module2", "etag": "AAAAAAAAAAM=", "deviceEtag": "NzI5NDA2MzEx", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "0001-01-01T00:00:00Z", "cloudToDeviceMessageCount": 0, "authenticationType": "certificateAuthority", "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "modelId": "", "version": 4, "tags": {"timeZone": "western"}, "properties": {"desired": {"conditions": {"temperature": {"warning": 70, "critical": 100}}, "$metadata": {"$lastUpdated": "2022-06-29T00:22:29.3929471Z", "$lastUpdatedVersion": 2, "conditions": {"$lastUpdated": "2022-06-29T00:22:29.3929471Z", "$lastUpdatedVersion": 2, "temperature": {"$lastUpdated": "2022-06-29T00:22:29.3929471Z", "$lastUpdatedVersion": 2, "warning": {"$lastUpdated": "2022-06-29T00:22:29.3929471Z", "$lastUpdatedVersion": 2}, "critical": {"$lastUpdated": "2022-06-29T00:22:29.3929471Z", "$lastUpdatedVersion": 2}}}}, "$version": 2}, "reported": {"$metadata": {"$lastUpdated": "0001-01-01T00:00:00Z"}, "$version": 1}}}]], "device2-child": [], "simDevice": [[{"additional_properties": {}, "module_id": "module1", "managed_by": null, "device_id": "simDevice", "generation_id": "637907447770121687", "etag": "NTIxMjQzNDU5", "connection_state": "Disconnected", "cloud_to_device_message_count": 0, "authentication": {"symmetricKey": {"primaryKey": "mock_key", "secondaryKey": "mock_key"}, "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "type": "sas"}}, {"deviceId": "simDevice", "moduleId": "module1", "etag": "AAAAAAAAAAI=", "deviceEtag": "NTIxMjQzNDU5", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "0001-01-01T00:00:00Z", "cloudToDeviceMessageCount": 0, "authenticationType": "sas", "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "modelId": "", "version": 3, "properties": {"desired": {"property2": 25, "$metadata": {"$lastUpdated": "2022-06-13T19:20:22.0278478Z", "$lastUpdatedVersion": 2, "property2": {"$lastUpdated": "2022-06-13T19:20:22.0278478Z", "$lastUpdatedVersion": 2}}, "$version": 2}, "reported": {"$metadata": {"$lastUpdated": "0001-01-01T00:00:00Z"}, "$version": 1}}}], [{"additional_properties": {}, "module_id": "simModule", "managed_by": null, "device_id": "simDevice", "generation_id": "637920585539407125", "etag": "NzU1NTgwOTgw", "connection_state": "Disconnected", "cloud_to_device_message_count": 0, "authentication": {"symmetricKey": {"primaryKey": "mock_key", "secondaryKey": "mock_key"}, "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "type": "sas"}}, {"deviceId": "simDevice", "moduleId": "simModule", "etag": "AAAAAAAAAAM=", "deviceEtag": "NzU1NTgwOTgw", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "0001-01-01T00:00:00Z", "cloudToDeviceMessageCount": 0, "authenticationType": "sas", "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "modelId": "", "version": 4, "properties": {"desired": {"color": "green", "shape": "square", "$metadata": {"$lastUpdated": "2022-06-30T18:49:50.0761263Z", "$lastUpdatedVersion": 3, "color": {"$lastUpdated": "2022-06-30T18:49:50.0761263Z", "$lastUpdatedVersion": 3}, "shape": {"$lastUpdated": "2022-06-30T18:49:50.0761263Z", "$lastUpdatedVersion": 3}}, "$version": 3}, "reported": {"$metadata": {"$lastUpdated": "0001-01-01T00:00:00Z"}, "$version": 1}}}]], "device3": [[{"additional_properties": {}, "module_id": "module1", "managed_by": null, "device_id": "device3", "generation_id": "637937846362414376", "etag": "NDE1NDI5MjMw", "connection_state": "Disconnected", "cloud_to_device_message_count": 0, "authentication": {"symmetricKey": {"primaryKey": "mock_key", "secondaryKey": "mock_key"}, "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "type": "sas"}}, {"deviceId": "device3", "moduleId": "module1", "etag": "AAAAAAAAAAI=", "deviceEtag": "NDE1NDI5MjMw", "status": "enabled", "statusUpdateTime": "0001-01-01T00:00:00Z", "connectionState": "Disconnected", "lastActivityTime": "0001-01-01T00:00:00Z", "cloudToDeviceMessageCount": 0, "authenticationType": "sas", "x509Thumbprint": {"primaryThumbprint": null, "secondaryThumbprint": null}, "modelId": "", "version": 3, "properties": {"desired": {"magic": 3, "$metadata": {"$lastUpdated": "2022-07-18T23:44:30.7287962Z", "$lastUpdatedVersion": 2, "magic": {"$lastUpdated": "2022-07-18T23:44:30.7287962Z", "$lastUpdatedVersion": 2}}, "$version": 2}, "reported": {"$metadata": {"$lastUpdated": "0001-01-01T00:00:00Z"}, "$version": 1}}}]]}, "children": {"edge-parent1": ["device1-child", "edge-parent2"], "edge-parent2": ["device2-child"], "device2": ["edge-parent1", "simDevice"]}}