config_version: "1.0"
# We don't need iothub info from the config schema
iothub:
  # This should probably be moved into configuration section
  authentication_method: symmetric_key

## IoT Edge configuration template to use
configuration:
  template_config_path: "./hierarchy_configs/device_config.toml"
  default_edge_agent: "$upstream:443/azureiotedge-agent:1.2"

## Hierarchy of IoT Edge devices to create
edgedevices:
  - device_id: device_1
    edge_agent: "mcr.microsoft.com/azureiotedge-agent:1.1"
    hostname: device_1
    deployment: "./hierarchy_configs/deploymentTopLayer.json"
    child:
    - device_id: device_2
      hostname: device_2
      deployment: "./hierarchy_configs/deploymentLowerLayer.json"
      child:
        - device_id: device_3
          hostname: device_3
          deployment: "./hierarchy_configs/deploymentLowerLayer.json"
    - device_id: device_4
      hostname: device_4
      deployment: "./hierarchy_configs/deploymentTopLayer.json"
      child:
        - device_id: device_5
          deployment: "./hierarchy_configs/deploymentLowerLayer.json"
          hostname: device_5
        - device_id: device_6
          hostname: device_6
          deployment: "./hierarchy_configs/deploymentLowerLayer.json"
  - device_id: device_7
    hostname: device_7
    edge_agent: "mcr.microsoft.com/azureiotedge-agent:1.2"
    container_auth:
      serveraddress: 'mcr.microsoft.com'
      username: 'test-user'
      password: '$credential$'